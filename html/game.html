<!doctype html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tao Fish - 遊戲主畫面</title>
    <link rel="stylesheet" href="../css/main.css" />
  </head>
  <body>
    <!-- ===== Loading 覆蓋層 ===== -->
    <div class="loading-overlay" id="loading-overlay">
      <div class="loading-content">
        <div class="loading-icon">🐟</div>
        <div class="loading-title">遊戲載入中</div>
        <div class="loading-progress-container">
          <div class="loading-progress-bar" id="loading-progress-bar"></div>
        </div>
        <div class="loading-status">
          <span id="loading-status-text">正在準備資料</span>
          <span class="loading-dots"></span>
        </div>
      </div>
    </div>

    <!-- ===== 遊戲主容器 ===== -->
    <main class="game-container">
      <!-- 遊戲地圖底圖 -->
      <img src="../images/gameMap.png" alt="遊戲地圖" class="game-map" />

      <!-- ===== 說明書區 (Manual Section) ===== -->
      <aside class="manual-section">
        <button class="help-button" id="help-button" title="遊戲說明">
          <div class="book-icon">
            <div class="book-spine"></div>
            <div class="book-lines"></div>
          </div>
        </button>
      </aside>

      <!-- ===== 牌卡區 (Card Deck Section) ===== -->
      <section class="card-deck-section">
        <!-- 魚類牌卡 -->
        <div
          class="deck-card fish-deck"
          id="fish-deck"
          title="點擊抽魚卡"
        ></div>
        <!-- 命運牌卡 -->
        <div class="deck-card fate-deck" id="fate-deck" title="點擊抽命運卡">
          <span class="fate-deck-icon">❓</span>
          <span class="fate-deck-label">命運</span>
        </div>
      </section>

      <!-- ===== 骰子區 (Dice Section) ===== -->
      <section class="dice-section">
        <div class="dice-click-layer" id="dice-click-layer"></div>
        <div class="dice-scene">
          <div class="cube" id="dice">
            <div class="cube__face cube__face--1">1</div>
            <div class="cube__face cube__face--2">2</div>
            <div class="cube__face cube__face--3">3</div>
            <div class="cube__face cube__face--4">4</div>
            <div class="cube__face cube__face--5">5</div>
            <div class="cube__face cube__face--6">6</div>
          </div>
        </div>
      </section>

      <!-- ===== 角色區 (Player Section) ===== -->
      <section class="player-section">
        <div class="fishman-container" data-player="1">
          <img
            src="../images/fishMan.png"
            alt="玩家1"
            class="fishman-img"
            loading="lazy"
          />
          <span class="fishman-label">玩家 1</span>
        </div>
        <div class="fishman-container" data-player="2">
          <img
            src="../images/fishMan.png"
            alt="玩家2"
            class="fishman-img"
            loading="lazy"
          />
          <span class="fishman-label">玩家 2</span>
        </div>
        <div class="fishman-container" data-player="3">
          <img
            src="../images/fishMan.png"
            alt="玩家3"
            class="fishman-img"
            loading="lazy"
          />
          <span class="fishman-label">玩家 3</span>
        </div>
        <div class="fishman-container" data-player="4">
          <img
            src="../images/fishMan.png"
            alt="玩家4"
            class="fishman-img"
            loading="lazy"
          />
          <span class="fishman-label">玩家 4</span>
        </div>
        <div class="fishman-container" data-player="5">
          <img
            src="../images/fishMan.png"
            alt="玩家5"
            class="fishman-img"
            loading="lazy"
          />
          <span class="fishman-label">玩家 5</span>
        </div>
      </section>
    </main>

    <!-- ===== 卡片 Modal 覆蓋層 ===== -->
    <div class="modal-overlay" id="modal-overlay">
      <div class="modal-card-container" id="modal-card-container">
        <div class="scene" id="card-scene">
          <div class="card-wrapper">
            <div class="card" id="card-element">
              <div class="card-face card-front" id="card-content"></div>
            </div>
          </div>
        </div>
      </div>
      <button class="collect-btn" id="collect-btn">🐟 收集這張魚牌</button>
      <button class="delete-btn" id="delete-btn">🗑️ 刪除這張魚牌</button>
      <div class="modal-hint">點擊任意處關閉</div>
    </div>

    <!-- ===== 收集區 (Collection Section) ===== -->
    <aside class="collection-section" id="collection-section">
      <span class="collection-section-title">已收集魚牌</span>
    </aside>

    <!-- ===== 說明書 Modal ===== -->
    <div class="help-modal-overlay" id="help-modal-overlay">
      <div class="help-modal">
        <button class="help-close-btn" id="help-close-btn">&times;</button>
        <h2 class="help-modal-title">遊戲說明</h2>

        <!-- 分頁標籤 -->
        <nav class="help-tabs">
          <button class="help-tab active" data-tab="rules">
            <span class="help-tab-icon">🎮</span>遊戲規則
          </button>
          <button class="help-tab" data-tab="roles">
            <span class="help-tab-icon">🎭</span>角色任務
          </button>
        </nav>

        <!-- 遊戲規則分頁 -->
        <article class="help-tab-content active" id="tab-rules">
          <ul class="help-steps">
            <li class="help-step">
              <span class="step-number">1</span>
              <span class="step-content"
                >請先抽取命運卡，根據命運卡的說明進行丟骰子或是換人等動作。</span
              >
            </li>
            <li class="help-step">
              <span class="step-number">2</span>
              <span class="step-content">點擊骰子可進行丟骰子。</span>
            </li>
            <li class="help-step">
              <span class="step-number">3</span>
              <span class="step-content"
                >符合中魚條件可以抽取魚牌，並再次丟骰子，確認符合捕捉條件。</span
              >
            </li>
          </ul>
        </article>

        <!-- 角色任務分頁 -->
        <article class="help-tab-content" id="tab-roles">
          <table class="role-table">
            <thead>
              <tr>
                <th>角色</th>
                <th>名稱狀態</th>
                <th>勝利條件</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="role-name">角色一</td>
                <td>小孩</td>
                <td>至少 <strong>3</strong> 條魚</td>
              </tr>
              <tr>
                <td class="role-name">角色二</td>
                <td>成年男子</td>
                <td>
                  至少 <strong>5</strong> 條魚，包含目標魚
                  <span class="target-fish">cilat</span> 一隻
                </td>
              </tr>
              <tr>
                <td class="role-name">角色三</td>
                <td>結婚的男人</td>
                <td>
                  至少 <strong>6</strong> 條魚，包含目標魚
                  <span class="target-fish">ilek</span> 一隻
                </td>
              </tr>
              <tr>
                <td class="role-name">角色四</td>
                <td>有小孩的爸爸</td>
                <td>
                  至少 <strong>6</strong> 條魚，包含目標魚
                  <span class="target-fish">ilek</span> 一隻
                </td>
              </tr>
              <tr>
                <td class="role-name">角色五</td>
                <td>有孫子的阿公</td>
                <td>
                  至少 <strong>3</strong> 條魚，包含目標魚
                  <span class="target-fish">tapez</span> 或
                  <span class="target-fish">acyod</span> 一隻
                </td>
              </tr>
            </tbody>
          </table>
        </article>

        <p class="help-modal-hint">點擊任意處或 × 按鈕關閉</p>
      </div>
    </div>

    <!-- ===== 遊戲邏輯 ===== -->
    <script type="module" src="../js/game.js"></script>
  </body>
</html>
